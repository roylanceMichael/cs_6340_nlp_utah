<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <title>RTN</title>
    <script>
        //here are our models
        var rules = [
            { "start": "NP", "arc": "art", "end": "NP1" },
            { "start": "NP", "arc": "adj", "end": "NP1" },
            { "start": "NP1", "arc": "adj", "end": "NP1" },
            { "start": "NP1", "arc": "noun", "end": "NP2" },
            { "start": "NP2", "arc": "noun", "end": "NP2" },
            { "start": "NP2" },
        ];

        var dictionary = [
            { "word": "the", "pos": ["art"] },
            { "word": "metal", "pos": ["noun", "adj"] },
            { "word": "can", "pos": ["noun", "verb"] },
            { "word": "was", "pos": ["verb"] },
            { "word": "a", "pos": ["art"] },
            { "word": "dark", "pos": ["adj"] },
            { "word": "blue", "pos": ["noun", "adj"] },
        ];

        $(document).ready(function () {
            $.each(dictionary, function (i, t) {
                var outerScopeString = "";
                $.each(t.pos, function (j, jj) {
                    outerScopeString = outerScopeString + " " + jj;
                });
                $("#dictionaryHolder").append('<option value="' + i + '">' + t.word + ':' + outerScopeString + '</option>');
            });

            $.each(rules, function (i, t) {
                $("#rulesHolder").append('<option value="' + i + '">' + t.start + ':' + t.arc + ':' + t.end + '</option>');
            });
            $("#runGrammar").click(function (event) {
                event.preventDefault();
                var workSpace = $("#checkGrammarText").val();
                //I need to systematically go through each one...
                var startMatch = /[^\s]+/;
                var endMatch = /[\s]+/;
                var firstRes = workSpace.match(startMatch);
                var secondRes = workSpace.match(endMatch);
                while (firstRes != null && secondRes != null && firstRes.index < secondRes.index) {
                    //first, create a string from the firstRes and secondRes
                    var subString = workSpace.substring(firstRes.index, secondRes.index);
                    alert(subString);
                    workSpace = workSpace.substring(secondRes.index, workSpace.length);
                    firstRes = workSpace.match(startMatch);
                    secondRes = workSpace.match(endMatch);
                    alert(workSpace + ":" + firstRes + ":" + secondRes);
                }
                
            });
        });
    </script>
</head>
<body>
    <h4>Type in a phrase</h4>
    <input type="text" id="checkGrammarText" />
    <input type="button" id="runGrammar" value="Run Grammar Parse" />
    <h4>Dictionary</h4>
    <select multiple="multiple" id="dictionaryHolder" style="height: 200px;">
    </select>
    <h4>Rules</h4>
    <select multiple="multiple" id="rulesHolder" style="height: 200px;">
    </select>
</body>
</html>
